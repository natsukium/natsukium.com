@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
	/* Shiki CSS variables mapping to base16 colors via base16-tailwind */
	:root {
		--shiki-foreground: rgb(var(--color-600));
		--shiki-background: rgb(var(--color-100));
		--shiki-token-constant: rgb(var(--color-red));
		--shiki-token-string: rgb(var(--color-green));
		--shiki-token-comment: rgb(var(--color-400));
		--shiki-token-keyword: rgb(var(--color-purple));
		--shiki-token-parameter: rgb(var(--color-yellow));
		--shiki-token-function: rgb(var(--color-blue));
		--shiki-token-string-expression: rgb(var(--color-green));
		--shiki-token-punctuation: rgb(var(--color-600));
		--shiki-token-link: rgb(var(--color-purple));
	}

	body {
		@apply flex min-h-[100svh] flex-col bg-100 font-sans text-600 selection:bg-blue/70 selection:text-100;
	}
	section,
	footer {
		@apply mx-auto max-w-3xl px-4;
	}
	a {
		@apply outline-2 outline-offset-1 outline-blue focus-visible:no-underline focus-visible:outline-dashed;
	}
	svg {
		@apply inline-block h-6 w-6 fill-600 group-hover:fill-blue;
	}
	svg.icon-tabler {
		@apply inline-block h-6 w-6 scale-125 fill-transparent stroke-current stroke-2 opacity-90 group-hover:fill-transparent sm:scale-110;
	}
	.prose {
		@apply prose-headings:!mb-3 prose-headings:!text-purple prose-h3:italic prose-p:!text-600 prose-a:!text-blue prose-a:!decoration-dashed prose-a:underline-offset-8 hover:prose-a:text-cyan prose-blockquote:!border-l-cyan/50 prose-blockquote:opacity-80 prose-figcaption:!text-600 prose-figcaption:opacity-70 prose-strong:!text-red prose-code:rounded prose-code:bg-200/75 prose-code:p-1 prose-code:before:!content-none prose-code:after:!content-none prose-ol:!text-600 prose-ul:overflow-x-clip prose-ul:!text-600 prose-li:marker:!text-purple prose-table:text-600 prose-th:border prose-th:border-300 prose-td:border prose-td:border-300 prose-img:!my-2 prose-img:mx-auto prose-img:border-2 prose-img:border-300 prose-hr:!border-300;
	}
	.prose a {
		@apply break-words hover:!text-cyan;
	}
	.prose thead th:first-child,
	tbody td:first-child,
	tfoot td:first-child {
		padding-left: 0.5714286em;
	}
	.prose h2#table-of-contents {
		@apply mb-2;
	}
	.prose details {
		@apply inline-block cursor-pointer select-none text-600;
	}
	.prose summary {
		@apply focus-outline;
	}
	.prose h2#table-of-contents + p {
		@apply hidden;
	}

	/* ===== scrollbar ===== */
	html {
		overflow-y: scroll;
	}

	/* width */
	::-webkit-scrollbar {
		@apply w-3;
	}

	/* Track */
	::-webkit-scrollbar-track {
		@apply bg-100;
	}

	/* Handle */
	::-webkit-scrollbar-thumb {
		@apply bg-200;
	}

	/* Handle on hover */
	::-webkit-scrollbar-thumb:hover {
		@apply bg-300;
	}

	/* ===== Code Blocks & Syntax Highlighting ===== */
	pre:has(code) {
		@apply border border-300;
	}
	pre,
	code {
		@apply font-mono;
	}
	code,
	blockquote {
		word-wrap: break-word;
	}

	pre > code {
		white-space: pre;
	}
}

@layer components {
	.display-none {
		@apply hidden;
	}
	.focus-outline {
		@apply outline-2 outline-offset-1 outline-blue focus-visible:no-underline focus-visible:outline-dashed;
	}
}
